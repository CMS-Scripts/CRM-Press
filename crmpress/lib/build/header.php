<?php 
/**
 *
 * This is the header.php file for the CRM Press theme. This particular file is located within the /build dir.
 * DO NOT EDIT THIS FILE! IT WILL BE OVERRIDEN WITH FUTURE UPDATES.
 * If you wish to make customizations, please make a child theme instead.
 *
 */

add_action( 'crmpress_head_doctype', 'crmpress_do_head_doctype' );
/**
 *
 * This takes care of the document type and some of the required jazz that goes in the header. This supports HTML5.
 *
 * The following filters/hooks are added to this function by default:
 *
 * crmpress_doctype, crmpress_head_meta
 *
 * @since 1.0
 *
 */
function crmpress_do_head_doctype() {

	?>
	<?php echo apply_filters( 'crmpress_doctype', __( '<!DOCTYPE html>', 'crmpress' ) ); ?>
	<html xmlns="http://www.w3.org/1999/xhtml" <?php language_attributes( 'xhtml' ); ?>>
	<head>
	<meta charset="<?php bloginfo( 'charset' ); ?>" />
	<meta name="viewport" content="width=device-width" />
	<?php do_action( 'crmpress_head_meta' ); // adds a hook good for <meta> items and such ?>
	<?php

}

add_action( 'crmpress_title', 'crmpress_do_title' );
/**
 *
 * This function adds the information used to generate all the information within the <title></title> tags. 
 * 
 * This is a modified version of the format used in the Twenty Eleven theme.
 *
 * @since 1.0
 *
 */
function crmpress_do_title() {

	?>
	<title><?php
	
		global $page, $paged;

		wp_title( '|', true, 'right' );

		// add the blog name
		bloginfo( 'name' );

		// add the blog description for the home/front page
		$site_description = get_bloginfo( 'description', 'display' );
		if ( $site_description && ( is_home() || is_front_page() ) )
			echo " | $site_description";

		// add a page number if necessary
		if ( $paged >= 2 || $page >= 2 )
			echo ' | ' . sprintf( __( 'Page %s', 'twentyeleven' ), max( $paged, $page ) );

	?></title>
	<?php

}

add_action( 'crmpress_link_tags', 'crmpress_do_link_tags' ); 
/**
 *
 * This function outputs the all of our <link> tags. This also outputs our stylesheet for the theme.
 *
 * The following hooks are added to this function by default:
 *
 * crmpress_link_output
 *
 * @since 1.0
 *
 */
function crmpress_do_link_tags() {

	?>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	<link rel="stylesheet" type="text/css" media="all" href="<?php bloginfo( 'stylesheet_url' ); ?>" />
	<link rel="pingback" href="<?php bloginfo( 'pingback_url' ); ?>" />
	<link rel="shortcut icon" href="<?php echo get_stylesheet_directory_uri(); ?>/images/favicon.ico" type="image/x-icon" />
	<?php do_action( 'crmpress_link_output' ); // good for adding in extra <link> tags or JavaScript ?>
	<?php 

}

add_action( 'crmpress_before_wireframe', 'crmpress_structure_start' );
/**
 *
 * This function outputs the beginning structure of the CRM Press theme.
 *
 * The following hooks are added to this function by default:
 *
 * crmpress_before_html
 *
 * @since 1.0
 *
 */
function crmpress_structure_start() {

	do_action ( 'crmpress_before_html' ); // allows for insertion of code before the theme structure is built

	?>
	<body <?php body_class(); ?>>
	<?php
	echo '<div id="wrapper">';

}

add_action( 'crmpress_header', 'crmpress_header_structure_start', 5 );
/**
 *
 * This function outputs the beginning structure of the CRM Press header.
 *
 * We add a low priority to this action to make sure that it fires before anything else in the crmpress_header hook.
 *
 * @since 1.0
 *
 */
function crmpress_header_structure_start() {

	echo '<div id="header">';
	echo '<div class="wrap">';

}

add_action( 'crmpress_site_title', 'crmpress_do_site_title' );
/**
 *
 * This function outputs the site title. 
 *
 * The following filters are added to this function by default:
 *
 * crmpress_logo_title
 *
 * @since 1.0
 *
 */
function crmpress_do_site_title() {

	$link = sprintf( '<a href="%s" title="%s">%s</a>', trailingslashit( home_url() ), esc_attr( get_bloginfo( 'name', 'display' ) ), get_bloginfo( 'name' ) );
	$tag = is_home() ? 'h1' : 'p';
	$output = sprintf( '<%s id="logo">%s</%s>', $tag, $link, $tag );
	echo apply_filters( 'crmpress_logo_title', $output ); // echo the output of the logo title and allow it to be filtered

}

add_action( 'crmpress_site_description', 'crmpress_do_site_description' );
/**
 *
 * This function outputs the site description. 
 *
 * @since 1.0
 *
 */
function crmpress_do_site_description() {

		echo apply_filters( 'crmpress_description', __( get_bloginfo( 'description' ), 'crmpress' ) );

}

add_action( 'crmpress_header_nav', 'crmpress_do_header_nav' );
/**
 *
 * This function outputs the navigation menu in the header. 
 *
 * @since 1.0
 *
 */
function crmpress_do_header_nav() {

	// Create the primary nav menu
	$crmpress_primary_nav = wp_nav_menu( array( 'theme_location' => 'primary', 'sort_column' => 'menu_order', 'container_class' => 'menu-header', 'echo' => 'false' ) );
						
	// Display the primary nav menu only if it is set
	if ( $crmpress_primary_nav ) {
		echo $crmpress_primary_nav;
	}
	
}

add_action( 'crmpress_header', 'crmpress_do_header' );
/**
 *
 * This function outputs all the content contained within the CRM Press header. 
 *
 * The following hooks are added to this function by default:
 *
 * crmpress_site_title, crmpress_header_nav
 *
 * @since 1.0
 *
 */
function crmpress_do_header() {

	echo '<div class="site-title">';
		do_action( 'crmpress_site_title' );
	echo '</div><!--end .site-title-->';
	
	echo '<p class="site-description">';
		do_action( 'crmpress_site_description' );
	echo '</p><!--end .site-description-->';

	echo '<div id="navigation">';
		do_action( 'crmpress_header_nav' );
	echo '</div><!--end #navigation-->';

}

add_action( 'crmpress_header', 'crmpress_header_structure_end', 15 );
/**
 *
 * This function outputs the ending structure of the CRM Press header.
 *
 * We add a high priority to this action to make sure that it fires after anything else in the crmpress_header hook.
 *
 * @since 1.0
 *
 */
function crmpress_header_structure_end() {

	echo '</div><!--end #header .wrap-->';
	echo '</div><!--end #header-->';

}